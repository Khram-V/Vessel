
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~`

Каждый отсек имеет форму косоугольного параллелепипеда, определяемого местоположением и локальным базисом из трех векторов на его ребрах.

Геометрический объект задается в рамках структуры Base,
состоящей из опорного вектора в глобальной системе координат Point::P
и трех базисных локальных векторов Vector::V(x,y,z),
образующих геометрический тензор для перехода к локальной системе отсчета Vector Base::in( Point ),
и содержащего тензор с предварительно обращенной матрицей для возврата к глобальной системе отсчета Point Base::out( Vector )

Координатная точка P в корабельной (внешней) системе отсчета определяет положение отсека внутри корпуса судна,
а базисные векторы V(x,y,z) определяют размер и ориентацию отсека в пространстве,
и отмеряются в том же масштабе корабельных координат с построением локальной системы отсчета внутри отсека
в ортогональном и нормированном до единицы ]0:1[ пространстве.

(таким образом, для исходного описания формы отсеков используется та же система координат, что и для корпуса судна)
Грани отсеков должны отсекаться фрагментами бортовой обшивки, с соответствующим замещением криволинейными поверхностями.
Грани отсеков, поднимающиеся выше главной водонепроницаемой палубы, дополняют объем и общее водоизмещение корпуса.
(при обрезке по обшивке корпуса учитывается толщина с условно осредненным объемом судового набора).

Предопределения:
 P.y == 0 задает симметричный относительно диаметральной плоскости отсек, простирающийся от левого к правому борту,
          при этом вектор локальной грани V(y) соответствует его полуширине с возможностью слома в диаметральной плоскости.
 P.y > 0  задаются два симметричных отсека левого и правого борта, разделяемых, по крайней мере, толщиной переборки.
 Если вектор V(z) направлен вверх, то отсек может пересекать палубу с дополнением объема корпуса, иначе отсек обрезается по днищу.

Формат файла *.vsr (Vessel compartment):
Комментарии задается знаками ";" или "//" в первой позиции строки.
Первая не пустая строка и не комментарий задаёт имя файла с таблицей плазовых ординат (*.vsl).
       Имя файла занимает целую строку, и может записываться с пробелами без кавычек (в кодировке Win-1251).

Местоположение и форма отсеков задаются с помощью одной опорной точки и трех локальных (разностных) векторов в корабельной системе отсчета, за которыми до конца строки может следовать название отсека.
Допускается запись координатных отсчетов для векторов и названия отсека в фигурных скобках {…}, за пределами которых могут использоваться любые пояснения и комментарии. Числа могут разделяться запятыми, однако пропуск числовых величин не предусматривается.
(В случае ошибок в синтаксисе описаний отсеков и ключей, работа транслятора строк не останавливается).

По тексту допускается использование ключевых слов, начинающихся с первой позиции строки, где формально задается работа с группами корабельных отсеков.
В ключевых словах используются первые три символа, за которыми следуют относительные числовые ссылки на предыдущие (с минусом) или последующие строки-отсеки,
   или перечисляются имена отсеков, по необходимости заключаемые в кавычки "…".
Аналогично синтаксису описания отсеков, если перечисления берутся в фигурные скобки {…}, то за пределами этих скобок могут использоваться любые пояснения и комментарии

 - отсутствие ключей-предикатов означает, что все последующие отсеки частично замещают пересекающиеся объемы предыдущих, отнимая часть их объема.
 - ключ exc{...} (или - exclusion,exception) в первой позиции строки задает относительное отстояние или имена отсеков, которые будут частично замещать объем одного последующего отсека, то есть, как предикат для одного конкретного отсека.
 - ключ uni{...} (или - unity,unify,unification) перечисление отсеков, объединяемых в геометрически единое целое (в однопроходной трансляции желательно использовать ключ до описания упоминаемых отсеков).
